<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>ORGBRO X3 BLE Printer</title>
  <script type="module" src="/src/main.js"></script>
</head>
<body class="bg-gray-100 p-6">
  <div class="container mx-auto bg-white p-6 rounded shadow">
    <h1>ORGBRO X3 BLE Printer</h1>

    <div id="messages"></div>

    <form id="printForm" action="http://localhost:5004/" method="post" enctype="multipart/form-data">
      <button id="scanBtn" type="button">Scan Printers</button>

      <div class="form-group">
        <label for="printerSelect">Select Printer:</label>
        <select id="printerSelect" name="printer_address" required>
          <option value="">-- Select Printer --</option>
        </select>
      </div>

      <div class="form-group">
        <label>Images (PNG/JPEG):</label>
        <input id="imageInput" type="file" name="images" multiple accept="image/*" required />
      </div>
      <div class="form-group">
        <label for="paperPreset">Paper Preset:</label>
        <select id="paperPreset">
          <option value="custom">Custom</option>
          <option value="50mmx4m">50mm × 4m</option>
          <option value="30mmD">Diameter 30mm</option>
          <option value="80mmx3m">80mm × 3m</option>
        </select>
      </div>
      <div class="form-group">
        <label for="paperWidth">Paper Width:</label>
        <select id="paperWidth" name="paper_width">
          <option value="384">58mm (384px)</option>
          <option value="576">80mm (576px)</option>
        </select>
      </div>
      <div class="form-group">
        <label for="paperHeight">Paper Height (px):</label>
        <input id="paperHeight" type="number" name="paper_height" value="600" min="1" />
      </div>
      <div class="form-group">
        <label>Preview:</label>
        <div id="imagePreview" class="preview-container"></div>
      </div>

      <div id="fileTableContainer" class="mt-4"></div>
      <input type="hidden" name="counts" id="countsInput" />
      <input type="hidden" name="order" id="orderInput" />

      <div class="form-group">
        <label for="densityInput" class="block font-bold mb-1">Print Density (0-255):</label>
        <div class="flex items-center space-x-2">
          <input id="densityInput" type="range" name="density" min="0" max="255" value="127" class="flex-1" />
          <span id="densityValue" class="w-12 text-center">127</span>
        </div>
      </div>
      <div class="form-group">
        <label for="brushSizeInput" class="block font-bold mb-1">Brush Size (px):</label>
        <div class="flex items-center space-x-2">
          <input id="brushSizeInput" type="range" min="1" max="50" value="5" class="flex-1" />
          <span id="brushSizeValue" class="w-12 text-center">5</span>
        </div>
      </div>
      <div class="form-group">
        <button id="resetBtn" type="button" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded mt-2">Reset Edits</button>
      </div>

      <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4">Print</button>
    </form>
  </div>
</body>
</html>
